<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="./static/css/base.css" rel="stylesheet">
    <link href="./static/css/tailwind.min.css" rel="stylesheet">
    <link href="https://fonts.font.im/css?family=Source+Serif+Pro%7CLato%7CInconsolata" rel="stylesheet"
        type="text/css">
    <title> 操作系统概述 </title>
    <!-- browser favicon -->
    <link rel="shortcut icon" href="./static/img/favicon.png">
    <style>
        .font-sans {
            font-family: 'Lato', 'SimHei', 'STHeiti', 'SimHei', 'Serif';
        }

        .font-serif {
            font-family: 'Source Serif Pro', 'Songti SC', 'SimSun', 'Serif', serif;
        }
    </style>
    <!-- <link rel="stylesheet" href="https://jyywiki.cn/static/katex/katex.min.css">
    <script defer src="https://jyywiki.cn/static/katex/katex.min.js"></script> -->
    <link rel="stylesheet" href="./static/katex/katex.min.css">
    <script defer src="./static/katex/katex.min.js"></script>
    <!-- <script defer src="https://jyywiki.cn/static/katex/auto-render.min.js"
        integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05"
        crossorigin="anonymous"></script> -->
    <script defer src="./static/katex/auto-render.min.js"></script>
    <script src="plugin/markdown/markdown.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            renderMathInElement(document.body, {
                // customised options
                // &#8226; auto-render specific keys, e.g.:
                delimiters: [
                    { left: '$$', right: '$$', display: true },
                    { left: '$', right: '$', display: false },
                    { left: '\\(', right: '\\)', display: false },
                    { left: '\\[', right: '\\]', display: true }
                ],
                // &#8226; rendering keys, e.g.:
                throwOnError: false
            });
        });
    </script>

    <link rel="stylesheet" href="./static/reveal/reveal.css">
    <link rel="stylesheet" href="./static/reveal/theme/simple.css" id="theme">
    <link rel="stylesheet" href="./static/jyy/jyy.css">

</head>

<body class="d-flex flex-column h-100">

    <div class="reveal">
        <div class="slides">
            <section><section><div class="center middle"><div style="width:100%"><div><h1 id="_1" class="text-2xl mt-2 font-sans">操作系统概述</h1><p class="font-serif my-1">
    <include src="Slides_Author">
        <div class="py-16">
            <p class="font-serif my-1">
                <a href="https://ics.nju.edu.cn/~jyy/" class=" text-amber-900">
                    蒋炎岩
                </a>
            </p>
        </div>
        <div class="row">
            <p class="font-serif my-1"/>
            
            <div class="author-affiliation">
                <a href="https://www.nju.edu.cn/main.htm," class=" text-amber-900">
                    <p class="font-serif my-1">
                        　　南京大学　　
                    </p>
                    <img class="inline-img h-24" src=".\static\img\812370dbefd548ba9302789c979cbd13.jpg" style="display: inline-block;"/>
                </a>
            </div>
            
            <div class="author-affiliation">
                <a href="https://cs.nju.edu.cn/main.htm," class=" text-amber-900">
                    <p class="font-serif my-1">
                        计算机科学与技术系
                    </p>
                    <img class="inline-img h-24" src=".\static\img\f18134e481ac45bd9c0a12e48962de07.jpg" style="display: inline-block;"/>
                </a>
            </div>
            
            <div class="author-affiliation">
                <a href="https://www.nju.edu.cn/main.htm," class=" text-amber-900">
                    <p class="font-serif my-1">
                        计算机软件研究所
                    </p>
                    <img class="inline-img h-24" src=".\static\img\24893db604fe4eceaa50e747ae391fff.png" style="display: inline-block;"/>
                </a>
            </div>
            
        </div>
    </include>
</p></div></div></div></section><section><div><h2 id="overview" class="text-xl mt-2 pb-2 font-sans">Overview</h2>
<p class="font-serif my-1">本次课回答的问题</p>
<ul class="list-disc font-serif">
<li class="ml-8"><strong>Q1</strong> (Why): 为什么要学操作系统？</li>
<li class="ml-8"><strong>Q2</strong> (What): 到底什么是操作系统？</li>
<li class="ml-8"><strong>Q3</strong> (How): 怎么学操作系统？</li>
</ul>
<hr/>

<p class="font-serif my-1">本次课主要内容</p>
<ul class="list-disc font-serif">
<li class="ml-8">前导知识概述</li>
<li class="ml-8">操作系统的历史/宏观概述</li>
</ul></div></section></section><section><section><div class="center middle"><div style="width:100%"><div><h1 id="_1" class="text-2xl mt-2 font-sans">个人/课程简介</h1></div></div></div></section><section><div><h2 id="_1" class="text-xl mt-2 pb-2 font-sans">我是谁？</h2>
<p class="font-serif my-1"><img class="float-right" src=".\static\img\3454f43bc1274684b7d80edb05274ca7.jpg" width="250px"/></p>
<p class="font-serif my-1"><del>努力成为卷王的临时工✖️</del> (<a href="https://cs.nju.edu.cn/ics/index.htm">计算机软件研究所</a>✔)</p>
<ul class="list-disc font-serif">
<li class="ml-8">“软件自动化”：测试/分析；代码合成</li>
<li class="ml-8">Two ACM SIGSOFT Distinguished Paper<br/>
    Awards; Best Paper Award @ ICSE'21</li>
</ul>
<hr/>

<p class="font-serif my-1">Co-Founder of Project-N</p>
<ul class="list-disc font-serif">
<li class="ml-8">在 bare-metal 上实现完整计算机系统</li>
</ul>
<hr/>

<p class="font-serif my-1">JSOI/<del>南京大学 ICPC 集训队</del>教练</p>
<ul class="list-disc font-serif">
<li class="ml-8">CCF NOI/NOIP 系列赛江苏赛区技术负责人</li>
<li class="ml-8">ICPC World Finals 49th Place (2009, team leader)</li>
<li class="ml-8">ICPC World Finals 13th Place (2019, co-coach)</li>
</ul></div></section><section><div><h2 id="_1" class="text-xl mt-2 pb-2 font-sans">课程信息与成绩构成</h2>
<blockquote>
<p class="font-serif my-1">所有课程信息都在<a href="http://jyywiki.cn/OS/2022/">课程主页</a>发布 (请 RTFM)！</p>
</blockquote>
<p class="font-serif my-1">成绩构成</p>
<ul class="list-disc font-serif">
<li class="ml-8">期末考试 40% + 随堂期中测验 10%</li>
<li class="ml-8">大实验 25% + 小实验 25%<ul class="list-disc font-serif">
<li class="ml-8">soft + hard deadlines<ul class="list-disc font-serif">
<li class="ml-8"><red>不要对编程抱有任何侥幸心理</red></li>
<li class="ml-8">无论你基础如何，都相信自己能做到</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr/>

<p class="font-serif my-1">不强制要求到课</p>
<ul class="list-disc font-serif">
<li class="ml-8">努力上传视频，但不保证设备不会翻车</li>
</ul></div></section><section><div><h2 id="academic-integrity" class="text-xl mt-2 pb-2 font-sans">学术诚信 (Academic Integrity)</h2>
<p class="font-serif my-1"><a href="https://integrity.mit.edu/">Academic integrity</a> 不是底线，而是 “自发的要求”</p>
<ul class="list-disc font-serif">
<li class="ml-8">对 “不应该做的事情” 有清楚的认识<ul class="list-disc font-serif">
<li class="ml-8"><strong><red>不将代码上传到互联网</red></strong></li>
<li class="ml-8"><strong><red>主动不参考别人完成的实验代码</red></strong></li>
<li class="ml-8"><strong><red>不使用他人测试用例</red></strong> (depends)</li>
</ul>
</li>
<li class="ml-8">有些行为可能使你<strong>得到分数</strong>，但<strong>失去应有的训练</strong></li>
</ul>
<hr/>

<p class="font-serif my-1">只在 “绝对可以求助” 的时候才寻求帮助</p>
<ul class="list-disc font-serif">
<li class="ml-8">在全民内卷、不劳而获很容易的时代很难</li>
<li class="ml-8">但坚持下来的人会变得很不一样</li>
</ul></div></section><section><div><h2 id="_1" class="text-xl mt-2 pb-2 font-sans">四周目反思</h2>
<p class="font-serif my-1">四周目表现平稳</p>
<ul class="list-disc font-serif">
<li class="ml-8">增加了更多的代码课和代码示例<ul class="list-disc font-serif">
<li class="ml-8">非递归汉诺塔</li>
<li class="ml-8"><code>.dl</code> 二进制文件格式与动态加载器</li>
<li class="ml-8">model checker (本周目将得到大幅改进)</li>
</ul>
</li>
</ul>
<hr/>

<p class="font-serif my-1">第五周目</p>
<ul class="list-disc font-serif">
<li class="ml-8">工具现代化 + 新手友好<ul class="list-disc font-serif">
<li class="ml-8">绝大部分代码示例都在 Windows 应用商店安装的 Ubuntu</li>
</ul>
</li>
<li class="ml-8">更多的 xv6 (大家有 RISC-V 的基础了)</li>
<li class="ml-8">逐渐重构 Online Judge</li>
<li class="ml-8">更新一部分实验 (如果可以的话，有一个 POSIX subsystem)</li>
</ul></div></section></section><section><section><div class="center middle"><div style="width:100%"><div><h1 id="q1" class="text-2xl mt-2 font-sans">Q1: 为什么要学操作系统？</h1></div></div></div></section><section><div><h2 id="_1" class="text-xl mt-2 pb-2 font-sans">为什么要学操作系统？</h2>
<p class="font-serif my-1"><img class="float-right" src=".\static\img\9c1405695599477fbd05d0773b3a6d86.jpg" width="300px"/></p>
<p class="font-serif my-1">为什么要学操作系统呢？</p>
<ul class="list-disc font-serif">
<li class="ml-8">为什么要学微积分/离散数学/XXXX/……？</li>
<li class="ml-8">长辈/学长：<del>擦干泪不要问为什么</del></li>
</ul>
<hr/>

<p class="font-serif my-1">微积分 “被混起来” 的几件事</p>
<ul class="list-disc font-serif">
<li class="ml-8">Newton 时代的微积分 (启蒙与应用)<ul class="list-disc font-serif">
<li class="ml-8">现代方法：Mathematica, <a href="https://docs.sympy.org/latest/tutorial/index.html">sympy</a>, <a href="http://sagemath.org/">sage</a><ul class="list-disc font-serif">
<li class="ml-8">这也是为什么我主张第一门语言学 Python</li>
</ul>
</li>
</ul>
</li>
<li class="ml-8">Cauchy 时代的微积分 (严格化与公理化)<ul class="list-disc font-serif">
<li class="ml-8">以及之后各种卡出的 bug (Weierstrass 函数、Peano 曲线……)</li>
</ul>
</li>
<li class="ml-8">微积分的现代应用<ul class="list-disc font-serif">
<li class="ml-8">优化、有限元、PID……</li>
</ul>
</li>
</ul></div></section><section><div><h2 id="_1" class="text-xl mt-2 pb-2 font-sans">学习操作系统的目的</h2>
<p class="font-serif my-1"><red>你体内的 “编程力量” 尚未完全觉醒</red></p>
<ul class="list-disc font-serif">
<li class="ml-8">每天都在用的东西，你还没搞明白<ul class="list-disc font-serif">
<li class="ml-8">窗口是怎么创建的？<a href="https://stackoverflow.blog/2017/05/23/stack-overflow-helping-one-million-developers-exit-vim/">为什么 Ctrl-C 有时不能退出程序？</a></li>
</ul>
</li>
<li class="ml-8">组里的服务器有 128 个处理器，但你的程序却只能用一个 😂</li>
<li class="ml-8">你每天都在用的东西，你却实现不出来<ul class="list-disc font-serif">
<li class="ml-8">浏览器、编译器、IDE、游戏/外挂、任务管理器、杀毒软件、病毒……</li>
</ul>
</li>
</ul>
<hr/>

<p class="font-serif my-1"><red>《操作系统》给你有关 “编程” 的全部</red></p>
<ul class="list-disc font-serif">
<li class="ml-8">悟性好：学完课程就在系统方向 “毕业”<ul class="list-disc font-serif">
<li class="ml-8">具有编写一切 “能写出来” 程序的能力 (具备阅读论文的能力)</li>
</ul>
</li>
<li class="ml-8">悟性差：内力大增<ul class="list-disc font-serif">
<li class="ml-8">可能工作中的某一天想起上课提及的内容</li>
</ul>
</li>
</ul></div></section><section><div><h2 id="_1" class="text-xl mt-2 pb-2 font-sans">学习操作系统的目的</h2>
<blockquote>
<p class="font-serif my-1">充满热情而且相当聪明的学生...早就听说过物理学如何有趣...相对论、量子力学……但是，当他们学完两年以前那种课程后，许多人就泄气了……学的还是斜面、静电这样的内容</p>
<p class="font-serif my-1">——《The Feynman Lectures on Physics, 1963》</p>
</blockquote>
<p class="font-serif my-1">我学《操作系统》的时候 (2009)，大家都说操作系统很难教</p>
<ul class="list-disc font-serif">
<li class="ml-8">使用<del>豆瓣评分高达 5.7/10</del> 的 “全国优秀教材”<ul class="list-disc font-serif">
<li class="ml-8">没有正经的实验 (写一些 16-bit code)</li>
<li class="ml-8">完全错误的 toolchain，调试全靠蛮力和猜</li>
<li class="ml-8">为了一点微不足道的分数内卷、沾沾自喜、失去 integrity</li>
</ul>
</li>
<li class="ml-8">这么玩，<red>脖子都要被美国人掐断了</red><ul class="list-disc font-serif">
<li class="ml-8">这门课的另一个意义：<red>告诉你可以去变得更强、真正的强</red></li>
</ul>
</li>
</ul></div></section></section><section><section><div class="center middle"><div style="width:100%"><div><h1 id="q2" class="text-2xl mt-2 font-sans">Q2: 到底什么是操作系统？</h1></div></div></div></section><section><div><h2 id="_1" class="text-xl mt-2 pb-2 font-sans">什么是操作系统？</h2>
<blockquote>
<p class="font-serif my-1">Operating System: A body of software, in fact, that is responsible for <em>making it easy to run programs</em> (even allowing you to seemingly run many at the same time), allowing programs to share memory, enabling programs to interact with devices, and other fun stuff like that. (OSTEP)</p>
</blockquote>
<hr/><div class="fragment" data-fragment-index="1"><p class="font-serif my-1">很多疑点</p>
<ul class="list-disc font-serif">
<li class="ml-8">“programs” 就完了？那么多复杂的程序呢！</li>
<li class="ml-8">“shared memory, interact with devices, ...”？</li>
</ul></div></div></section><section><div><h2 id="contd" class="text-xl mt-2 pb-2 font-sans">什么是操作系统？ (cont'd)</h2>
<p class="font-serif my-1">“管理软/硬件资源、为程序提供服务” 的程序？
<img class="center" src=".\static\img\cfccaef868c6454eaaf45872139a2757.jpg" width="768px"/></p></div></section><section><div><h2 id="_1" class="text-xl mt-2 pb-2 font-sans">理解操作系统</h2>
<p class="font-serif my-1">“精准” 的定义毫无意义</p>
<ul class="list-disc font-serif">
<li class="ml-8">问出正确的问题：操作系统如何从一开始变成现在这样的？</li>
<li class="ml-8">三个重要的线索<ul class="list-disc font-serif">
<li class="ml-8">计算机 (硬件)</li>
<li class="ml-8">程序 (软件)</li>
<li class="ml-8">操作系统 (管理软件的软件)</li>
</ul>
</li>
</ul>
<hr/>

<p class="font-serif my-1">本课程讨论<red>狭义的操作系统</red></p>
<ul class="list-disc font-serif">
<li class="ml-8">对单一计算机硬件系统作出抽象、支撑程序执行的软件系统</li>
<li class="ml-8">学术界谈论 “操作系统” 是更广义的 “System” (例子：OSDI/SOSP)</li>
</ul></div></section><section><div><h2 id="1940s" class="text-xl mt-2 pb-2 font-sans">1940s 的计算机</h2>
<p class="font-serif my-1">跨时代、非凡的天才设计，但很简单 (还不如我们数电实验课做的 CPU 复杂呢)：</p>
<ul class="list-disc font-serif">
<li class="ml-8">计算机系统 = 状态机 (ICS 课程的 takeaway message)</li>
<li class="ml-8">标准的 Mealy 型数字电路<ul class="list-disc font-serif">
<li class="ml-8">ENIAC (1946.2.14；请在这个特殊的节日多陪陪你的电脑)</li>
</ul>
</li>
</ul>
<p class="font-serif my-1"><img class="center" src=".\static\img\e3101b80a64c44348d1566372329fca0.jpg" width="650px"/></p></div></section><section><div><h2 id="1940s-contd" class="text-xl mt-2 pb-2 font-sans">1940s 的计算机 (cont'd)</h2>
<p class="font-serif my-1">电子计算机的实现</p>
<ul class="list-disc font-serif">
<li class="ml-8">逻辑门：<a href="https://www.bilibili.com/video/av59005720/?vd_source=4ee99d4ebd507c7277fa312ed28dbdda">真空电子管</a></li>
<li class="ml-8">存储器：延迟线 (delay lines)</li>
<li class="ml-8">输入/输出：打孔纸带/指示灯</li>
</ul>
<p class="font-serif my-1"/><center>
<img class="inline" src=".\static\img\b47c724a6cf049c6bb92a76be7b34df1.gif" width="250px"/>
<img class="inline" src=".\static\img\33c6b6d907814e3db4a95a0c57a43485.gif" width="300px"/>
<img class="inline" src=".\static\img\93914cbedf2b424e80a27412ed342d99.gif" width="400px"/>
</center></div></section><section><div><h2 id="1940s" class="text-xl mt-2 pb-2 font-sans">1940s 的程序</h2>
<p class="font-serif my-1">ENIAC 程序是用物理线路 “hard-wire” 的</p>
<ul class="list-disc font-serif">
<li class="ml-8">重编程需要重新接线<ul class="list-disc font-serif">
<li class="ml-8"><a href="https://www.cs.drexel.edu/~bls96/eniac/">ENIAC Simulator; sieve.e</a></li>
</ul>
</li>
</ul>
<hr/>

<p class="font-serif my-1">最早成功运行的一系列程序：打印平方数、素数表、计算弹道……</p>
<ul class="list-disc font-serif">
<li class="ml-8">大家还在和真正的 “bugs” 战斗</li>
</ul>
<p class="font-serif my-1"><img class="center" src=".\static\img\82dd620639c94d2896393470b09d0022.webp" width="400px"/></p></div></section><section><div><h2 id="1940s" class="text-xl mt-2 pb-2 font-sans">1940s 的操作系统</h2>
<blockquote>
<p class="font-serif my-1">没有操作系统。</p>
</blockquote>
<p class="font-serif my-1">能把程序放上去就很了不起了</p>
<ul class="list-disc font-serif">
<li class="ml-8">程序直接用指令操作硬件</li>
<li class="ml-8">不需要画蛇添足的程序来管理它</li>
</ul></div></section><section><div><h2 id="1950s" class="text-xl mt-2 pb-2 font-sans">1950s 的计算机</h2>
<p class="font-serif my-1">更快更小的逻辑门 (晶体管)、更大的内存 (磁芯)、丰富的 I/O 设备</p>
<ul class="list-disc font-serif">
<li class="ml-8">I/O 设备的速度已经严重低于处理器的速度，中断机制出现 (1953)</li>
</ul>
<p class="font-serif my-1"><img class="center" src=".\static\img\b834151cf5c2453b8bfa00e9baaa9818.jpg" width="360px"/></p></div></section><section><div><h2 id="1950s" class="text-xl mt-2 pb-2 font-sans">1950s 的程序</h2>
<p class="font-serif my-1">可以执行更复杂的任务，包括通用的计算任务</p>
<ul class="list-disc font-serif">
<li class="ml-8">希望使用计算机的人越来越多；希望调用 API 而不是直接访问设备</li>
<li class="ml-8">Fortran 诞生 (1957)</li>
</ul>
<div class="codehilite"><pre class="bg-gray-100 overflow-x-auto rounded p-2 mb-2 mt-2"><span/><code><span class="n">C</span><span class="o">----</span> <span class="n">THIS</span> <span class="n">PROGRAM</span> <span class="n">READS</span> <span class="n">INPUT</span> <span class="n">FROM</span> <span class="n">THE</span> <span class="n">CARD</span> <span class="n">READER</span><span class="p">,</span>
<span class="n">C</span><span class="o">----</span> <span class="mi">3</span> <span class="n">INTEGERS</span> <span class="kr">IN</span> <span class="mh">EACH</span> <span class="n">CARD</span><span class="p">,</span> <span class="n">CALCULATE</span> <span class="n">AND</span> <span class="n">OUTPUT</span>
<span class="n">C</span><span class="o">----</span> <span class="n">THE</span> <span class="n">SUM</span> <span class="kr">OF</span> <span class="n">THEM</span><span class="p">.</span>
  <span class="mi">100</span> <span class="n">READ</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span> <span class="n">I1</span><span class="p">,</span> <span class="n">I2</span><span class="p">,</span> <span class="n">I3</span>
   <span class="mi">10</span> <span class="n">FORMAT</span><span class="p">(</span><span class="mi">3</span><span class="n">I5</span><span class="p">)</span>
      <span class="kr">IF</span> <span class="p">(</span><span class="n">I1</span><span class="p">.</span><span class="n">EQ</span><span class="p">.</span><span class="mi">0</span> <span class="p">.</span><span class="n">AND</span><span class="p">.</span> <span class="n">I2</span><span class="p">.</span><span class="n">EQ</span><span class="p">.</span><span class="mi">0</span> <span class="p">.</span><span class="n">AND</span><span class="p">.</span> <span class="n">I3</span><span class="p">.</span><span class="n">EQ</span><span class="p">.</span><span class="mi">0</span><span class="p">)</span> <span class="n">GOTO</span> <span class="mi">200</span>
      <span class="n">ISUM</span> <span class="o">=</span> <span class="n">I1</span> <span class="o">+</span> <span class="n">I2</span> <span class="o">+</span> <span class="n">I3</span>
      <span class="n">WRITE</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">20</span><span class="p">)</span> <span class="n">I1</span><span class="p">,</span> <span class="n">I2</span><span class="p">,</span> <span class="n">I3</span><span class="p">,</span> <span class="n">ISUM</span>
   <span class="mi">20</span> <span class="n">FORMAT</span><span class="p">(</span><span class="mi">7</span><span class="n">HSUM</span> <span class="kr">OF</span> <span class="p">,</span> <span class="n">I5</span><span class="p">,</span> <span class="mh">2H</span><span class="p">,</span> <span class="p">,</span> <span class="n">I5</span><span class="p">,</span> <span class="mh">5H</span> <span class="n">AND</span> <span class="p">,</span> <span class="n">I5</span><span class="p">,</span>
     <span class="o">*</span>   <span class="mh">4H</span> <span class="kr">IS</span> <span class="p">,</span> <span class="n">I6</span><span class="p">)</span>
      <span class="n">GOTO</span> <span class="mi">100</span>
  <span class="mi">200</span> <span class="n">STOP</span>
      <span class="kr">END</span>
</code></pre></div></div></section><section><div class="center middle"><div style="width:100%"><div><h1 id="_1" class="text-2xl mt-2 font-sans">省略</h1></div></div></div></section></section><section><section><div class="center middle"><div style="width:100%"><div><h1 id="_1" class="text-2xl mt-2 font-sans">省略</h1></div></div></div></section></section>
        </div>
    </div>

    <script src="./static/reveal/reveal.js"></script>

    <script>
        Reveal.initialize({

            width: 1024, height: 768,

            slideNumber: 'c/t',
            controlsTutorial: false,
            progress: false,
            hash: true,
            center: false,
            autoAnimateUnmatched: true,
            autoAnimateEasing: 'ease-out',
            autoAnimateDuration: 0.3,
            transitionSpeed: 'fast'
        });
    </script>
</body>

</html>